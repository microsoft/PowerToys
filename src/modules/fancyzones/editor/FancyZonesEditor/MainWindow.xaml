<Window x:Class="FancyZonesEditor.MainWindow"
        x:Name="MainWindow1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:FancyZonesEditor"
        xmlns:Converters="clr-namespace:FancyZonesEditor.Converters"
        xmlns:props="clr-namespace:FancyZonesEditor.Properties"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        mc:Ignorable="d"
        Title=""
        Width="1000"
        Height="640"
        Background="{DynamicResource BackgroundBrush}"
        ResizeMode="NoResize"
        ui:WindowHelper.UseModernWindowStyle="True"
        WindowStartupLocation="CenterScreen"
        Initialized="OnInitialized"
        Closing="OnClosing">
    <Window.Resources>
        <Converters:BooleanToBrushConverter x:Key="BooleanToBrushConverter" />
        <Converters:ModelToVisibilityConverter x:Key="ModelToVisibilityConverter" />
        <Converters:BooleanToIntConverter x:Key="BooleanToIntConverter" />
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="286"/>
        </Grid.ColumnDefinitions>

        <StackPanel>
            <TextBlock x:Name="dialog_Title" Text="{x:Static props:Resources.Choose_Layout}" Style="{StaticResource BaseTextBlockStyle}"  Margin="12,8,12,8"  />
            <TabControl BorderThickness="0" Background="Transparent" x:Name="TemplateTab" SelectedIndex="{Binding IsCustomLayoutActive, Converter={StaticResource BooleanToIntConverter}, Mode=OneWay}" Margin="-8,0,0,0">
                <TabItem Header="{x:Static props:Resources.Templates}" Style="{StaticResource TabItemPivotStyle}">
                    <StackPanel>
                        <ItemsControl ItemsSource="{Binding DefaultModels}" Margin="8,0,0,0">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Orientation="Horizontal" ItemWidth="{Binding WrapPanelItemSize, ElementName=MainWindow1, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" ItemHeight="{Binding ItemWidth, ElementName=WrapPanel1}" x:Name="WrapPanel1" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Margin="8" 
                                        BorderBrush="{Binding IsSelected, Converter={StaticResource BooleanToBrushConverter}}"
                                        BorderThickness="2"
                                        CornerRadius="2"
                                        Background="{DynamicResource ItemBackgroundBrush}" 
                                        MouseDown="LayoutItem_Click">
                                        <Border.Effect>
                                            <DropShadowEffect BlurRadius="4" Opacity="0.18"  ShadowDepth="1" />
                                        </Border.Effect>
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="32"/>
                                            </Grid.RowDefinitions>
                                            <local:LayoutPreview Margin="16" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>

                                            <TextBlock Padding="8,0,8,0" 
                                                   TextTrimming="CharacterEllipsis" 
                                                   DockPanel.Dock="Top"
                                                   FontSize="14"
                                                   Grid.Row="1"
                                                   FontWeight="SemiBold"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Top"
                                                   Text="{Binding Name}"
                                                   Foreground="{DynamicResource PrimaryForegroundBrush}"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </TabItem>


                <TabItem Header="{x:Static props:Resources.Custom}" Style="{StaticResource TabItemPivotStyle}">
                    <StackPanel>
                        <ItemsControl ItemsSource="{Binding CustomModels}" Margin="8,8,0,0">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Orientation="Horizontal" ItemWidth="{Binding WrapPanelItemSize, ElementName=MainWindow1, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" ItemHeight="{Binding ItemWidth, ElementName=WrapPanel2}" x:Name="WrapPanel2" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Margin="8" 
                                        BorderBrush="{Binding IsSelected, Converter={StaticResource BooleanToBrushConverter}}"
                                        BorderThickness="2"
                                        CornerRadius="2"
                                        Background="{DynamicResource ItemBackgroundBrush}" 
                                        MouseDown="LayoutItem_Click">
                                        <Border.Effect>
                                            <DropShadowEffect BlurRadius="4" Opacity="0.18"  ShadowDepth="1" />
                                        </Border.Effect>
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="32"/>
                                            </Grid.RowDefinitions>
                                            <local:LayoutPreview Margin="16" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>

                                            <TextBlock Padding="8,0,8,0" 
                                                   TextTrimming="CharacterEllipsis" 
                                                   DockPanel.Dock="Top"
                                                   FontSize="14"
                                                   Grid.Row="1"
                                                   FontWeight="SemiBold"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Top"
                                                   Text="{Binding Name}"
                                                   Foreground="{DynamicResource PrimaryForegroundBrush}"/>

                                            <Button x:Name="DeleteButton" FontFamily="Segoe MDL2 Assets" Content="&#xE107;" Style="{StaticResource DefaultButtonStyle}" Visibility="{Binding Converter={StaticResource ModelToVisibilityConverter}}" Click="OnDelete" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="8" BorderThickness="0" Background="Transparent"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                    </StackPanel>
                </TabItem>
            </TabControl>
        </StackPanel>
        <Grid Grid.Column="1" Background="{DynamicResource SecondaryBackgroundBrush}" Margin="0,-32,0,0">
            <StackPanel Margin="12">
                <TextBlock Text="Configuration" Style="{StaticResource BaseTextBlockStyle}" Foreground="{DynamicResource PrimaryForegroundBrush}" Margin="0,28,0,24"  />
                <StackPanel Orientation="Vertical" Margin="0,0,0,32">
                    <TextBlock Text="Number of zones"/>
                    <StackPanel Margin="0,6,0,0" Orientation="Horizontal" HorizontalAlignment="Left">
                        <Button x:Name="decrementZones" Width="32" Height="32" Content="&#xE949;" FontFamily="Segoe MDL2 Assets" Style="{StaticResource DefaultButtonStyle}" Click="DecrementZones_Click"/>
                        <TextBlock x:Name="zoneCount" Text="{Binding ZoneCount}" TextAlignment="Center" FontSize="16" Width="48" FontWeight="SemiBold" Foreground="{DynamicResource PrimaryForegroundBrush}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <Button x:Name="incrementZones" Width="32" Height="32" Content="&#xE948;" FontFamily="Segoe MDL2 Assets" Style="{StaticResource DefaultButtonStyle}" Click="IncrementZones_Click"/>
                    </StackPanel>
                </StackPanel>

                <ui:ToggleSwitch x:Name="spaceAroundSetting" Header="{x:Static props:Resources.Show_Space_Zones}"  IsOn="{Binding ShowSpacing}"/>
                <TextBlock Text="{x:Static props:Resources.Space_Around_Zones}" IsEnabled="{Binding ShowSpacing}" Margin="0,8,0,0" Foreground="{DynamicResource PrimaryForegroundBrush}"/>
                <TextBox x:Name="paddingValue" Margin="0,6,0,0" IsEnabled="{Binding ShowSpacing}" Text="{Binding Spacing, Mode=TwoWay}" Width="86" HorizontalAlignment="Left"/>
                <TextBlock Text="{x:Static props:Resources.Distance_adjacent_zones}" IsEnabled="{Binding ShowSpacing}" Margin="0,16,0,0" Foreground="{DynamicResource PrimaryForegroundBrush}"/>
                <TextBox x:Name="sensitivityRadiusValue" Margin="0,6,0,0" Text="{Binding SensitivityRadius, Mode=TwoWay}" Width="86" HorizontalAlignment="Left"/>
            </StackPanel>
            <StackPanel Orientation="Vertical" Margin="12" HorizontalAlignment="Stretch" VerticalAlignment="Bottom">
                <Button x:Name="EditCustomButton" HorizontalAlignment="Stretch" Content="{x:Static props:Resources.Edit_Selected_Layout}" Style="{StaticResource DefaultButtonStyle}" Click="EditLayout_Click"/>
                <Button x:Name="ApplyCustomButton" HorizontalAlignment="Stretch" Margin="0,12,0,0" Content="{x:Static props:Resources.Apply}" Style="{StaticResource AccentButtonStyle}" Click="Apply_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>